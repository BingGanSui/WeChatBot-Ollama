## 概念说明
***提示词*** 是在对话开始前发送给模型的文字，可以简单理解为模型的设定(人设)。例如“你将扮演xx角色进行对话”。同时在提示词中可以包含对于输出文字的要求，如“尽量简短”等。提示词不会消失在上下文中，会一直保留。感兴趣可以了解**提示词工程**。提示词可以玩的很花，~~毕竟调教模型不犯法~~

***上下文*** 模型处理能力有限，只能保留一定量的对话作为记忆，这段对话叫**上下文**。上下文保留数量大小与模型记忆相关，数字越大记忆越久。

***温度*** 代表模型输出文字的多样程度，使用词语的丰富度。温度越高，模型的语言越丰富越奔放。

# Bot基础功能
在**私聊**中可以**直接**向Bot发送信息。
私聊中默认设置如下：

    “Prompt提示词”:””,
    “Addition消息发送尾缀”:””,
    “ContextNum上下文保留数量”:20,
    “Temperature模型温度”:0.0,
    “Model默认模型“:”deepseek-r1:8b”,
    “ThoughtOutput是否输出思考过程”:True
    
在**群聊**中使用 **@Bot+内容** 的格式向Bot发送信息。
群聊中默认设置如下：

    “Prompt提示词”:”请想象你现在加入了一个群聊，你需要对群里的消息进行回复。回复尽量简短，而且要求风趣贴心。”,
    “Addition消息发送尾缀”:”请用纯文字回答，不含有如回车等任何格式，同时你的回答尽量简短”,
    “ContextNum上下文保留数量”:20,
    “Temperature模型温度”:0.0,
    “Model默认模型“:”deepseek-r1:8b”,
    “ThoughtOutput是否输出思考过程”:False
## 激活联网搜索
在消息前**加上\*号**激活bot的联网搜索功能，搜索时模型*不带有记忆*，将针对性回答*号后的内容。
联网搜索的信息有**相关性**限制，搜索网上没有任何资料的问题比如 *周浩阳为什么是M* 这种完全没有资料的玩意，就会自动取消联网搜索，用基于记忆的方式进行回答。
~~关于联网功能很鸡肋的狡辩~~：bot是基于ollama平台开发的，不支持function_calling功能，就是并不原生支持联网。现在是采用了 *问题->提取关键词->爬虫搜索->回馈模型* 的逻辑实现了联网，保证了信息的准确度，但是不能带有过多的记忆（不然回答会很奇怪）~~下一步会使用xinference重构bot，那个就支持联网了~~
目前使用的搜索引擎是 **SearxNG** 支持搜索翻墙内容，限制**非法信息**与过于**政治**的信息。
    
# Bot指令
*以下均为设定内容，有严格的指令格式(还有大小写)。指令不会发送给模型，指令不会在模型的记忆中存在，指令会被程序存档。*
### 选择模型
切换想要使用的模型，切换模型**不会**删除记忆。

    @Bot #ChooseModel <content>
\<content>为以下之一：(参数越多，生成越慢，结果越智能)
**deepseek-r1:1.5b** deepseek-r1 15亿参数
**deepseek-r1:8b** deepseek-r1 80亿参数
**deepseek-r1:14b** deepseek-r1 140亿参数
(千问模型目前调用存在bug，还没想到办法解决)
**qwen:0.5b** 通义千问 5亿参数
**qwen:4b** 通义千问 40亿参数
**qwen:14b** 通义千问 140亿参数版本
### 回滚对话
即删除刚才的对话

    @Bot #Del <content>
\<content> (**非必要参数** 此项为空时默认删除2条消息)可以为一个整数，用于指定回滚的数量
### 查看设定
    @Bot #Show
### 重启对话
    @Bot #Restart
### 确认存活
    @Bot #Alive
### 设定提示词
    @Bot #ResetPrompt <content>
### 设定消息发送尾缀
设置在**你**发送的每一句消息后加上的字符。

    @Bot #Add <content>
### 设定上下文保留数量
    @Bot #ContextNum <content>
\<content>为一个**整数**
### 设定是否输出思考
deepseek模型将输出细致的思考过程，此处可以设置**是否**输出思考。其余模型暂不支持。
这个不是让模型思考的指令。。。

    @Bot #Thought <content>
\<content>为 **1或0**
### 设定模型温度
    @Bot #SetTemp <content>
\<content>为[0.0,1.0]之间的**小数**(请打小数点)
### 重新初始化
    @Bot #KillErr
清除所有参数与对话记录，重新启动模型
*可通过此命令解决非网络故障*

## 故障排除
输出**HOLD**: bot被我挂起了。一般来说是电脑在悲鸣，我让电脑歇会。
一直输出一样的内容(什么自我介绍之类的)：#Restart可解决，我也不知道为啥会这样。
#Alive没反应：bot正在维护或指令正在排队。性能有限，有富哥可以v一点我可以放服务器上跑（（（
输出抽象英文之类的：先尝试#Restart，还是不行就用#KillErr，都没用就是卡bug了。。。
无输出但#alive有效：这是卡bug了。还请告诉我怎么卡出来的。。。